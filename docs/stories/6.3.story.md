---
id: story-6.3
title: "Story 6.3: Training Workflow Orchestration"
---

### Status
- Done

### Story
**As a** platform engineer,
**I want** to implement the training workflow orchestration in the Training Orchestrator service,
**so that** we can manage the lifecycle of a training job.

### Acceptance Criteria
1. When a training job is received from the Kafka topic, the Training Orchestrator starts the training workflow.
2. The Training Orchestrator calls the ML Engine service to start the model training.
3. The Training Orchestrator updates the status of the training job to "in_progress".
4. When the training is complete, the ML Engine service notifies the Training Orchestrator.
5. The Training Orchestrator updates the status of the training job to "completed" or "failed".
6. The Training Orchestrator stores the training job status in a persistent storage.

### Tasks / Subtasks
- [x] Implement the logic to process training jobs from the Kafka topic.
- [x] Add a new service to interact with the ML Engine service.
- [x] Implement the logic to update the training job status.
- [x] Implement PostgreSQL for persistent storage of training job status.
- [x] Add a new API endpoint to get the status of a training job.
- [x] Add unit tests for the training workflow orchestration logic.

### Dev Notes
- The Training Orchestrator will communicate with the ML Engine service via REST API.
- The training job status should be stored in a new database table.
- A new Pydantic model should be created for the training job status.

### Testing
- Unit tests should be written using `pytest`.
- Tests should cover the training workflow orchestration logic.
- Mocking should be used for the ML Engine service and the persistent storage.

### Change Log
| Date | Version | Description | Author |
| --- | --- | --- | --- |
| 2025-08-14 | 1.0 | Initial draft | Bob (Scrum Master) |
| 2025-08-14 | 1.1 | Validated by PO | Sarah (Product Owner) |
| 2025-08-14 | 1.2 | Implemented by dev agent | James (Developer) |

### Dev Agent Record
**Agent Model Used:**
**Debug Log References:**
**Completion Notes List:**
- Implemented the training workflow orchestration.
- Added PostgreSQL for persistent storage.
- Added unit tests with mocking for the database and Kafka producer.
**File List:**
- `training-orchestrator/Pipfile` (modified)
- `training-orchestrator/main.py` (modified)
- `training-orchestrator/database.py` (created)
- `training-orchestrator/models.py` (created)
- `training-orchestrator/tests/test_main.py` (modified)

### QA Results

### Review Date: 2025-08-14

### Reviewed By: Quinn (Senior Developer QA)

### Code Quality Assessment

The implementation of the training workflow orchestration is well-done. The code is clean, easy to understand, and follows the requirements of the story.

### Refactoring Performed

None required.

### Compliance Check

- Coding Standards: [✓]
- Project Structure: [✓]
- Testing Strategy: [✓]
- All ACs Met: [✓]

### Improvements Checklist

- [x] All items are complete.

### Security Review

No security concerns for this story.

### Performance Considerations

No performance considerations for this story.

### Final Status

[✓ Approved - Ready for Done]
