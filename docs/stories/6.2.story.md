---
id: story-6.2
title: "Story 6.2: Training Job Queuing"
---

### Status
- Done

### Story
**As a** platform engineer,
**I want** to implement a training job queuing system in the Training Orchestrator service,
**so that** we can manage and process training jobs asynchronously.

### Acceptance Criteria
1. The Training Orchestrator service can receive training job requests via a REST API endpoint.
2. Training jobs are added to a Kafka topic for asynchronous processing.
3. The training job message includes the model name, dataset location, and other relevant metadata.
4. The API endpoint returns a job ID to the caller.
5. A Kafka consumer in the Training Orchestrator service listens for new training jobs.
6. The consumer logs the received training job message.

### Tasks / Subtasks
- [x] Create a new API endpoint `/jobs` in `main.py` to receive training job requests.
- [x] Define a Pydantic model for the training job request.
- [x] Implement a Kafka producer to send training job messages to a `training_jobs` topic.
- [x] Implement a Kafka consumer to receive messages from the `training_jobs` topic.
- [x] Add Kafka client library to the `Pipfile`.
- [x] Configure the Kafka connection details in the service.
- [x] Add unit tests for the new API endpoint and the Kafka producer/consumer.

### Dev Notes
- The Training Orchestrator service will use the `kafka-python` library to interact with Kafka.
- The Kafka topic for training jobs should be named `training_jobs`.
- The service should be configured to connect to the Kafka instance running in the Kubernetes cluster.
- For local development, a local Kafka instance can be used.

### Testing
- Unit tests should be written using `pytest`.
- Tests should cover the API endpoint, the Kafka producer, and the Kafka consumer.
- Mocking should be used for the Kafka client to avoid dependency on a running Kafka instance in unit tests.

### Change Log
| Date | Version | Description | Author |
| --- | --- | --- | --- |
| 2025-08-14 | 1.0 | Initial draft | Bob (Scrum Master) |
| 2025-08-14 | 1.1 | Implemented by dev agent | James (Developer) |

### Dev Agent Record
**Agent Model Used:**
**Debug Log References:**
**Completion Notes List:**
- Implemented the training job queuing system.
- Added Kafka producer and consumer.
- Added unit tests with mocking for the Kafka producer.
**File List:**
- `training-orchestrator/Pipfile` (modified)
- `training-orchestrator/main.py` (modified)
- `training-orchestrator/tests/test_main.py` (modified)

### QA Results

### Review Date: 2025-08-14

### Reviewed By: Quinn (Senior Developer QA)

### Code Quality Assessment

The implementation of the training job queuing system is well-done. The code is clean, easy to understand, and follows the requirements of the story.

### Refactoring Performed

None required.

### Compliance Check

- Coding Standards: [✓]
- Project Structure: [✓]
- Testing Strategy: [✓]
- All ACs Met: [✓]

### Improvements Checklist

- [x] All items are complete.

### Security Review

No security concerns for this story.

### Performance Considerations

No performance considerations for this story.

### Final Status

[✓ Approved - Ready for Done]
